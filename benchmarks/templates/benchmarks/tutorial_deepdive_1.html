{% extends 'benchmarks/base.html' %}
{% load static %}
{% load compress %}

{% block main %}
{% include 'benchmarks/components/nav-bar.html' %}
<div class="container my_container landing">
    <section class="section">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-half has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Dive Deeper:  Use Case 1- Walkthrough of a ResNet-50 Model Submission</h3>
                    <p>
                        One of the biggest benefits Brain-Score has to offer is integrative benchmarking, in which
                        a user can submit a model and see how it performs on many benchmarks, not just a single one.
                        Oftentimes this leads to new insights and correlations, as well as interesting findings.
                    </p>
                    <br>
                    <p>
                        In this use case, we will download a sample model (ResNet-50), and explore the parts of the
                        submission package. You can then base your own unique submissions on our sample project.
                    </p>
                    <br>
                </div>
            </div>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 1: Install Necessary Packages</h3>
                    <p> If you have not already, we highly recommend completing the quick start section above before
                        we start to explore our ResNet-50 model submission package. Although completion is not
                        required, the Quickstart will give you a nice background into what model scores mean, and how to score a model
                        locally on a single, publicly available benchmark. If you have already done the quick start,
                        skip to step 2 Below. Otherwise, visit please <a href="https://www.brain-score.org/tutorial/quickstart">here</a>
                        to install the necessary packages for Brain-Score.
                    </p>
                </div>
            </div>
            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 2: Download the starter submission Zip folder: </h3>
                    <p> Brain-Score allows users to submit plugins in two ways: directly to the site, via a Zip file
                        upload, or through a Github PR. In this deepdive, you will explore a sample model submission
                        in order to become familiar with the submission package structure.
                        In Deepdive 3, you will prepare to submit a model via Github Pull Request. The sample Zip
                        is a stock version of ResNet-50 pretrained on imagenet. You can download the sample zip file
                        <a href="{% static "/benchmarks/packaging_tutorial.zip" %}" download="packaging_tutorial.zip">here</a>.
                    </p>
                </div>
            </div>
            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 3: Explore the Starter Submission File</h3>
                    <p> After unzipping the packaging_submission.zip file, you will see that the root folder is
                        called packaging_tutorial. This in turns contains another folder for the plugin itself, in
                        this case models. This /models folder then contains a folder called /resnet50_tutorial.
                        This final also contains 4 other Python files. The overall structure of the submission
                        package is shown below. Note: this would also be the same overall structure as your submission
                        package, or if you are submitting any other plugins (benchmarks, metrics, or data). Feel free
                        to base your future submissions off of this package, just please do not submit the
                        resnet50_tutorial model.
                    </p>
                    <br>
                    <img class="submission example" width="500" height="auto" src="{% static "/benchmarks/img/submission_structure.png" %}" />
                    <p> Just like the sample submission, each submission that you submit must contain at least the 2 required
                        python files: __init__.py and test.py. The other two files, setup.py and model.py, are optional,
                        but will be explored below along with the two required files. Let's begin with the __init__.py file:
                    </p>
                </div>
            </div>

            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 4: Explore the  __init__.py  file: </h3>
                    <p> This file adds your plugin to the Brain-Score plugin registry and to the Brain-Score
                        ecosystem at large. You are registering your model to a unique global identifier. You can
                        see that this file is fairly straightforward. Lines 1-3 are standard imports, and line 5
                        adds the plugin to the registry. In the future, when you submit models (or other plugins),
                        you will add the plugin to our ecosystem via line 5.

                        Please note: Brain-Score does not allow duplicate plugin
                        names, so if you submit another version of the same model, make sure to make the identifier unique!
                        Also note: It would be prohibitively time- and resource-consuming to actually load every plugin
                        in a registry before they are needed, so the plugin discovery process relies on string parsing.
                        This unfortunately means that it’s not possible to programmatically add plugin identifiers to
                        the registry; each registration needs to be written explicitly in the form of
                        plugin_registry['my_plugin_identifier']
                        Next, let’s check out the setup.py file.
                    </p>
                </div>
            </div>

            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 5: The test.py file:  </h3>
                       <p>Currenlty, this can be a blank file
                       </p>

                </div>
            </div>
            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 6: Exploring an (optional) setup.py  file:  </h3>
                    <p> This file (or either requirements.txt or pyproject file) is where you add any requirements
                        that your model needs, in the requirements dictionary on lines 6-7 if using a setup.py. If your model
                        had any extra requirements, such as a specific version of a package or an external git
                        repository, you would add it to the list defined on line 6. Lines 9 - 24 are just
                        administrative definitions, and can be left untouched. This file is completely optional, and
                        can be excluded if your model needs no extra packages.
                   </p>
                </div>
            </div>
            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 7: Exploring another optional file: model.py!</h3>
                    <p> This is usually where the model itself if defined as well as added into the Brain-Score
                        ecosystem. The reason why this is optional is that using model.py is a convention we use to
                        separate code, but that is not needed. It is also plugin-specific. We think it is good practice,
                        however, to use a separate model.py for models, to keep things neat.
                    </p>
                    <br>
                    <p> Let’s explore this file in more
                        detail: Lines 1 - 9 are standard imports. Lines
                        20-21 define the get_model_list() function that simply returns the model identifier.
                        Next, Lines 24-48 define the get_model() function that gets the model itself.
                        You can see on line 26 the model itself is being loaded from pytorch. If you have a custom
                        model that you have created yourself, check out our Custom Model Submission Guide here in
                        Deep Dive 2 Lines 41 - 43 contain the get_layers() function, which returns the layers you
                        are interested in scoring.
                    </p>
                    <br>
                    <p> Lines 46 and 47 define the Bibtex for the model. You can leave this blank when submitting,
                        but we highly recommend you add a reference. Finally, lines 80 - 83 defines a call to the
                        Brain-Score scoring system to score our model locally on a mock benchmark.
                    </p>
                </div>
            </div>

            <div class="columns is-centered">
                <div class="column is-three-quarters has-text-centered">
                    <h3 class="benefits_heading is-size-3-mobile">Part 8: Putting it all together </h3>
                    <p> If you were actually submitting a model, the final step would be to run your model locally,
                        to ensure that everything is in working order. Let’s open up our model.py folder,
                        and run the file itself. Once ran, this should produce the message below, indicating
                        that you are ready for submission:
                    </p>
                    <br><pre>
                    <code class="language-python">
                    Test successful, you are ready to submit!
                    </code>
                    </pre><br>
                    <p> Once you receive this message, you could rezip
                        (after you save everything, of course) our sample model.zip file,
                        and you would be good to submit your model.
                        <strong>
                            Again, please do NOT actually submit the
                            model that you just explored during this entire tutorial. This process was for illustration purposes only.
                        </strong>
                        <br>
                        When you submit an actual (non-tutorial) model, you will receive an email with your results
                        within 24 hours. (Most of the time it only takes 2-3 hours to score).
                        If you would like to know how to submit a custom model to Brain-Score, please visit the next
                        deepdive <a href="https://www.brain-score.org/tutorial/deepdive_2">here</a>.
                       </p>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}
