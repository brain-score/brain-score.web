{% extends 'benchmarks/base.html' %}
{% load static %}
{% load compress %}

{% block main %}
{% include 'benchmarks/components/nav-bar.html' %}
<div class="container login" style="background-image: url({% static '/benchmarks/img/login_brain.png' %});">
    <div class="column is-half has-text-centered-mobile">
        <div class="container login-left vision_submit">
            <h1 style="font-size: 2em;">Submission System, {{ formatted }} </h1>
            <br>

            <!-- Submission status section -->
            <div class="submission-status"></div>
                <h2 style="font-size: 1.25em;">Submission Limits</h2>
                <div class="submission-info">
                    <p>Daily submissions: {{ submission_status.daily_submissions }}/{{ SUBMISSION_DAILY_LIMIT }}</p>
                    <p>Recent submissions: {{ submission_status.burst_submissions }}/{{ SUBMISSION_BURST_LIMIT }}</p>
                    {% if submission_status.cooldown_remaining > 0 %}
                        <p class="warning">Cooldown period: {{ submission_status.cooldown_remaining|divisibleby:3600 }}h {{ submission_status.cooldown_remaining|remainder:3600|divisibleby:60 }}m remaining</p>
                    {% endif %}
                </div>
                <p class="submission-rules">
                    • Maximum {{ SUBMISSION_BURST_LIMIT }} submissions before {{ SUBMISSION_COOLDOWN_HOURS }}h cooldown<br>
                    • Maximum {{ SUBMISSION_DAILY_LIMIT }} submissions per day
                </p>
            </div>
            <br>
            <!--End submission status section-->

            <h1 style="font-size: 1.25em;">Below you can upload a plugin. Plugins can either be a {{ domain }} model, benchmark, dataset,
            or metric. </h1>
            <p class="benefits_info is-size-5-mobile shorter submission">
                You may submit either a new plugin or a revision for a plugin that you have already submitted.
                (You must be the original submitter of a plugin in order to submit a revision).
                <br>
                See <a href="https://brain-score-core.readthedocs.io/en/latest/modules/glossary.html#term-Plug-in">
                this template</a> for more information on plugin submissions.
            </p>
            <form action="" method="post" enctype="multipart/form-data">
                {% csrf_token %}

                {% for field in form %}
                    <p class="special">
                        <br>
                        {{ field.label_tag }}
                        {{ field }}
                        <br>
                        {% if field.help_text %}
                            <small style="display: none">{{ field.help_text }}</small>
                        {% endif %}
                        {% for error in field.errors %}
                            <p style="color: red">{{ error }}</p>
                        {% endfor %}
                    </p>
                {% endfor %}
                </p>
                <br>
                <button type="submit" class="button submission">Submit Plugin</button>
                <br>
            </form>
            <br>
        <p style="font-size: 12px"><a href="/profile/{{ domain }}">Return to {{ domain }} profile page</a></p>
        </div>
    </div>
</div>

<style>
    .submission-status {
        background-color: #f5f5f5;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
    }
    
    .submission-info {
        margin: 10px 0;
    }
    
    .submission-rules {
        font-size: 0.9em;
        color: #666;
        margin-top: 10px;
    }
    
    .warning {
        color: #d9534f;
    }
    
    button[disabled] {
        opacity: 0.5;
        cursor: not-allowed;
    }
</style>

{% endblock %}