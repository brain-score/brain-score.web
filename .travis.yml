language: python
matrix:
  include:
    - name: 3.7 public
      python: '3.7'
      dist: xenial # python 3.7 workaround: https://github.com/travis-ci/travis-ci/issues/9815
      sudo: true
before_install:
  - pip install --upgrade pip
install:
  - pip install .
  - pip list # list installed package versions
  - npm install --no-optional
  - npm install -g sass
  - npm list
before_script:
  # setup database
  - python manage.py makemigrations
  - python manage.py migrate
  # load data
  - python manage.py loaddata static/benchmarks/fixture-users.json
  - python manage.py loaddata static/benchmarks/fixture-benchmarkreferences.json
  - python manage.py loaddata static/benchmarks/fixture-benchmarktypes.json
  - python manage.py loaddata static/benchmarks/fixture-benchmarkinstances.json
  - python manage.py loaddata static/benchmarks/fixture-modelreferences.json
  - python manage.py loaddata static/benchmarks/fixture-models.json
  - python manage.py loaddata static/benchmarks/fixture-scores.json
script:
  - python manage.py test
