
@import '../variables'
@import 'gradient-theme'
@import '../components/tooltip'

// Base button styling (all buttons get basic styling)
button,
.btn
  border: none
  color: white
  transition: all 0.3s ease
  padding: 8px 16px
  border-radius: 4px
  cursor: pointer
  font-size: 14px

// Gradient buttons (primary actions)
#advancedFilterBtn,
#applyFiltersBtn
  @include gradient-button
  // Override the specific styling that was conflicting
  background: $gradient-primary !important
  width: 180px
  font-size: 15px
  display: flex
  align-items: center
  justify-content: center
  gap: 6px
  height: 40px

  &:hover
    background: $gradient-light !important

// Solid buttons (reset actions)
#resetFiltersBtn,
#resetAllFiltersBtn
  @include solid-button($primary-color)

// Generic button classes (for the filter actions)
.btn-primary
  @include gradient-button
  padding: 12px 24px
  font-weight: 500
  font-size: 0.9rem

.btn-secondary
  @include solid-button($primary-color)
  padding: 12px 24px
  font-weight: 500
  font-size: 0.9rem

// Container - FIXED: Remove max-width constraint for full-screen layout
.leaderboard-container
  padding: 20px
  display: block
  overflow-x: auto
  max-width: none
  width: 100%
  margin: 0
  box-sizing: border-box

// Rank cell
.ag-cell[col-id="rank"]
  display: flex
  font-size: 24px
  font-weight: 300
  align-items: center
  text-align: center
  color: #333
  height: 100%

// Model cell
.ag-cell[col-id="model"]
  display: flex
  flex-direction: column
  justify-content: center
  align-items: flex-start
  padding: 0 10px
  white-space: nowrap
  line-height: 1.5
  overflow: hidden
  text-overflow: ellipsis
  min-width: 180px

  a,
  .model-name,
  .model-submitter
    max-width: 100%
    white-space: nowrap
    overflow: hidden
    text-overflow: ellipsis

  .model-name
    color: #4285f4
    font-weight: normal
    margin-bottom: 4px

  .model-submitter
    font-size: 12px
    color: #666
    font-style: italic

// Runnable status cell
.ag-cell[col-id="runnable_status"]
  display: flex
  justify-content: center
  align-items: center
  height: 100%

.runnable-status-cell
  display: flex
  justify-content: center
  align-items: center
  height: 100%

.runnable-status-icon
  width: 12px
  height: 12px
  border-radius: 50%
  cursor: help
  position: relative
  z-index: 1
  
  &.runnable-green
    background-color: #28a745
  
  &.runnable-red
    background-color: #dc3545
  
  &.runnable-grey
    background-color: #6c757d

// Ensure tooltips work properly
.runnable-status-cell,
.runnable-status-icon
  pointer-events: auto

// Score pill container
.score-pill-container
  display: flex
  justify-content: center
  align-items: center
  height: 100%

// Score pill
.score-pill
  opacity: 0.8
  width: 120px
  border-radius: 30px
  font-size: 15px
  font-weight: 300
  display: flex
  justify-content: center
  align-items: center
  text-align: center
  box-shadow: 0 1px 3px rgba(0,0,0,0.1)
  color: black

// Header pill (benchmark group)
.expandable-header
  width: auto
  min-width: 120px
  max-width: 120px
  height: 40px
  border-radius: 20px

  border: 2px solid transparent
  display: flex
  justify-content: center
  align-items: center
  margin: 0 auto
  position: relative
  font-weight: bold
  color: white
  white-space: nowrap
  text-overflow: ellipsis
  cursor: pointer

  &:hover
    cursor: pointer

  &.average
    background-color: $brainscore_green
    color: $brainscore_gray4
    &:hover
      background-color: lighten($brainscore_green, 10%)
  &.neural
    background-color: $brainscore_gray4
    color: $brainscore_green
    &:hover
      background-color: lighten($brainscore_gray4, 10%)
  &.behavior
    background-color: $brainscore_gray4
    color: $brainscore_green
    &:hover
      background-color: lighten($brainscore_gray4, 10%)
  &.engineering
    background-color: #47B7DE
    color: $brainscore_gray4
    &:hover
      background-color: lighten(#47B7DE, 10%)
  &:not(.neural):not(.behavior):not(.engineering):not(.average)
    background-color: #d4d4d4
    color: black
    &:hover
      background-color: lighten(#d4d4d4, 5%)
      border: 2px solid #cccccc
  .expandable-header-label-container
    flex: 1 1 auto
    text-align: center
    overflow: hidden
    padding: 6px 0
    display: flex
    justify-content: center
  .expandable-header-label
    white-space: nowrap
    overflow: hidden
    text-overflow: ellipsis
    display: inline-block
    max-width: 100%

  &::after
    content: ''
    position: absolute
    top: 0
    right: 0
    width: 20%
    height: 100%
    background: linear-gradient(270deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%)
    pointer-events: none
    z-index: 1
    
  &:hover::after
    background: linear-gradient(270deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%)

.leaf-header
  display: flex
  justify-content: center
  align-items: center
  padding: 6px 10px
  background-color: #eeeeee
  border-radius: 20px
  height: 40px
  min-width: 120px
  max-width: 120px
  cursor: pointer
  position: relative  // Enable absolute positioning for click areas

  .leaf-header-label
    display: inline-block
    max-width: 100px
    overflow: hidden
    text-overflow: ellipsis
    white-space: nowrap
    font-weight: bold
    color: #333
    pointer-events: none  // Prevent text selection conflicts

  // Navigation hint gradient on left 80%
  &::before
    content: ''
    position: absolute
    top: 0
    left: 0
    width: 80%
    height: 100%
    background: linear-gradient(90deg, rgba(66, 133, 244, 0.03) 0%, rgba(66, 133, 244, 0) 100%)
    pointer-events: none
    z-index: 1
    border-radius: 20px 0 0 20px
    
  &:hover::before
    background: linear-gradient(90deg, rgba(66, 133, 244, 0.08) 0%, rgba(66, 133, 244, 0) 100%)

  // Sorting hint gradient on right 20%  
  &::after
    content: ''
    position: absolute
    top: 0
    right: 0
    width: 20%
    height: 100%
    background: linear-gradient(270deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0) 100%)
    pointer-events: none
    z-index: 1
    border-radius: 0 20px 20px 0
    
  &:hover::after
    background: linear-gradient(270deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0) 100%)

// Count badge inside header pill
.benchmark-count
  position: absolute
  bottom: -12px  // Moved lower for more space
  right: -5px
  background: white
  color: #333
  font-size: 11px
  border: 1px solid #ddd
  border-radius: 12px
  padding: 2px 8px
  cursor: pointer
  transition: all 0.2s ease
  z-index: 12  // Higher than sorting area
  display: flex
  align-items: center
  gap: 3px
  min-width: 20px
  white-space: nowrap
  box-shadow: 0 2px 4px rgba(0,0,0,0.1)  // Add subtle shadow

  &:hover
    background: #f0f0f0
    border-color: #bbb
    transform: scale(1.05)
    box-shadow: 0 3px 6px rgba(0,0,0,0.15)

  i
    font-size: 9px
    color: #666
    
  span, .count-value
    font-weight: 600
    
  // Smooth transition for count changes
  .count-value
    transition: all 0.2s ease
    
  // Visual feedback for filtered out benchmarks (count = 0)
  &[style*="opacity: 0.5"]
    background: #f5f5f5
    color: #999
    border-color: #ccc
    
    i, .count-value
      color: #999

.sort-indicator
  flex: 0 0 auto
  margin-left: 4px
  padding-right: 4px
  z-index: 11  // Higher than sorting area but lower than count badge
  transition: all 0.2s ease
  font-size: 16px !important  // Match AG Grid default icon size
  
  // Use AG Grid's built-in icon styling - inherit color from grid theme
  &.ag-icon
    color: inherit
    display: inline-block
    
  &:hover
    transform: scale(1.1)

// White sort icons for neural and behavior headers (dark backgrounds)
.expandable-header.neural .sort-indicator,
.expandable-header.behavior .sort-indicator
  color: white !important
  
  &:hover
    transform: scale(1.1)
    color: white !important

// Navigation area (middle 60% for benchmark links)
.navigation-area
  &:hover
    background-color: rgba(255, 255, 255, 0.08) !important  // Slightly different highlight for navigation
    
// Search bar and filter button wrapper
#leaderboardSearchWrapper
  display: flex
  justify-content: space-between
  align-items: center
  margin-bottom: 10px
  width: 100%
  gap: 12px

  #modelSearchInput
    flex: 1
    padding: 10px 14px
    font-size: 14px
    border: 1px solid #e1e1e1
    border-radius: 6px
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05)
    outline: none
    background-color: #fdfdfd
    transition: border 0.2s ease

    &:focus
      border-color: #727272

.ag-header-cell-resize
  width: 0 !important // Disable resize handles
  background-color: transparent
  opacity: 0

.ag-header-cell:hover .ag-header-cell-resize
  background-color: rgba(0, 0, 0, 0.1) // light gray on hover
  cursor: col-resize



#benchmarkFilterPanel
  width: 100%
  overflow-y: auto
  padding: 0.4rem
  border: 1px solid $primary-light
  border-radius: 6px
  background-color: #f9f9f9

.advanced-filters
  padding: 20px
  background: #f8f9fa
  border: 1px solid $primary-light
  margin: 1rem 0
  border-radius: 8px
  box-shadow: 0 2px 8px rgba(0,0,0,0.1)
  overflow: visible !important  // Allow dropdowns to overflow
  display: block


  h3
    margin-top: 0
    margin-bottom: 20px
    font-size: 1.25rem
    color: #333
    border-bottom: 2px solid #e9ecef
    padding-bottom: 10px

.advanced-filters.hidden
  display: none

.leaderboard-container:not(.sidebar-mode) #advancedFiltersPanel:not(.hidden)
  display: block

.benchmark-tree
  list-style: none
  padding-left: 0.8rem
  max-height: none
  overflow: visible
  input[type="checkbox"]
    @include themed-control

.benchmark-node
  margin: 0.15rem 0
  padding-left: 0.8rem
  border-left: 1px solid #ddd
  position: relative

.tree-node-header
  display: flex
  align-items: center
  gap: 4px
  cursor: default
  padding: 0.1rem 0

.tree-node-header label
  display: inline-block
  max-width: 100%
  overflow: hidden
  text-overflow: ellipsis
  white-space: nowrap
  flex: 1
  font-size: 0.9rem

.tree-toggle
  width: 1rem
  display: inline-block
  font-family: monospace
  color: #888
  cursor: pointer
  user-select: none

.collapsed > ul
  display: none

.filter-section
  margin-bottom: 1.5rem

.filter-section h4
  margin-top: 0
  font-size: 1rem
  font-weight: bold

.ag-header-cell.centered-header
  .ag-header-cell-label
    justify-content: center
    text-align: center

.ag-header-cell.centered-header .ag-header-cell-text
  text-align: center
  width: 100%
  font-size: 14px

.filters-container
  display: grid
  gap: 20px
  align-items: stretch
  min-height: 400px
  overflow: visible !important  // Allow dropdowns to overflow

  // Desktop: 3 columns
  @media (min-width: 1200px)
    grid-template-columns: 1fr 1fr 1fr

  // Tablet: Benchmarks full width, then 2 columns
  @media (min-width: 768px) and (max-width: 1199px)
    grid-template-columns: 1fr 1fr

    .benchmark-column
      grid-column: 1 / -1  // Full width

  // Mobile: Single column
  @media (max-width: 767px)
    grid-template-columns: 1fr

.filter-column
  background: white
  border-radius: 8px
  padding: 20px
  box-shadow: 0 2px 4px rgba(0,0,0,0.05)
  border: 1px solid #e9ecef
  display: flex
  flex-direction: column
  min-height: 400px
  // REMOVE max-height entirely to prevent clipping
  overflow: visible !important  // Allow dropdowns to overflow the container
  position: relative  // Establish stacking context
  z-index: 1

  h4
    //margin-top: 0
    //margin-bottom: 16px
    //font-size: 1rem
    //font-weight: 600
    //color: #495057
    //padding-bottom: 8px
    //border-bottom: 1px solid #e9ecef

  // Special handling for benchmark column with height matching
  &.benchmark-column
    .filter-column-header
      flex-shrink: 0       // Don't shrink the header
    
    #benchmarkFilterPanel
      flex: 1              // Take up all remaining space after header
      overflow-y: auto     // Make the panel itself scrollable
      height: auto         // Let flex handle the height
      max-height: 340px    // Match the container height minus header space
      width: 100%          // Take full width

    .benchmark-tree
      overflow: visible    // Remove internal scrolling

  .filter-dropdown
    margin: 0 !important
    padding: 0 !important

    input
      width: 100% !important
      box-sizing: border-box !important

.filter-group
  margin-bottom: 16px
  position: relative

  label
    display: block
    font-weight: 500
    margin-bottom: 6px
    color: #495057
    font-size: 0.9rem

  .filter-dropdown
    width: 100% !important
    position: relative
    z-index: 10

.filter-dropdown
  position: relative
  z-index: 10

  .filter-input
    width: 100%
    padding: 12px 16px
    padding-right: 40px
    border: 2px solid #e1e5e9
    border-radius: 8px
    background: white
    cursor: pointer
    font-size: 0.9rem
    font-weight: 500
    transition: all 0.2s ease
    box-sizing: border-box
    color: #495057

    // Dropdown arrow - styled to match your theme
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='10' viewBox='0 0 14 10'%3E%3Cpath fill='%23666' d='M7 10L0 0h14z'/%3E%3C/svg%3E")
    background-repeat: no-repeat
    background-position: right 14px center
    background-size: 12px

    &::placeholder
      color: #8e9aaf
      font-weight: 400

    &:focus
      outline: none
      border-color: $primary-color
      box-shadow: 0 0 0 3px rgba($primary-color, 0.1)
      cursor: text

    &:hover:not(:focus)
      border-color: #c5cdd6
      background-color: #fafbfc

    // When dropdown is active, rotate arrow and change border
    .active &
      border-color: $primary-color
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='10' viewBox='0 0 14 10'%3E%3Cpath fill='%23#{str-slice(#{$primary-color}, 2)}' d='M7 0L14 10H0z'/%3E%3C/svg%3E")
      box-shadow: 0 0 0 3px rgba($primary-color, 0.1)

  .dropdown-content
    position: absolute !important
    top: calc(100% + 4px) !important
    left: 0 !important
    width: 100% !important
    margin: 0 !important
    padding: 8px 0 !important
    background: white !important
    border: 2px solid $primary-color !important
    border-radius: 8px
    max-height: 220px
    overflow-y: auto
    z-index: 1000 !important
    box-shadow: 0 8px 24px rgba(0,0,0,0.15)
    display: block
    opacity: 1
    visibility: visible
    pointer-events: auto
    box-sizing: border-box !important
    transform: none !important

    &.hidden
      display: none !important

    // Custom scrollbar styling
    &::-webkit-scrollbar
      width: 6px

    &::-webkit-scrollbar-track
      background: #f1f3f5
      border-radius: 3px

    &::-webkit-scrollbar-thumb
      background: #c1c8cd
      border-radius: 3px

      &:hover
        background: #a6b1ba

    .dropdown-option
      position: relative
      padding: 12px 16px
      padding-left: 44px  // Space for custom checkbox
      cursor: pointer
      transition: all 0.15s ease
      font-size: 0.9rem
      font-weight: 500
      color: #495057
      border-bottom: 1px solid #f1f3f5

      &:last-child
        border-bottom: none

      &:hover
        background-color: #f8f9fa
        color: #343a40

      // Custom checkbox using the same style as benchmark tree
      &::before
        content: ''
        position: absolute
        left: 16px
        top: 50%
        transform: translateY(-50%)
        width: 18px
        height: 18px
        border: 2px solid #ced4da
        border-radius: 4px
        background: white
        transition: all 0.2s ease
        @include themed-control  // Use your existing themed control mixin

      &.selected
        background-color: #e8f4f8
        color: $primary-color
        font-weight: 600

        &::before
          background-color: $primary-color
          border-color: $primary-color
          transform: translateY(-50%) scale(1.05)

        // Checkmark
        &::after
          content: ''
          position: absolute
          left: 21px
          top: 50%
          transform: translateY(-65%) rotate(45deg)
          width: 5px
          height: 10px
          border: solid white
          border-width: 0 2px 2px 0
          opacity: 1

        &:hover
          background-color: #d1ecf1
          color: darken($primary-color, 10%)

    .no-results
      padding: 16px
      text-align: center
      color: #8e9aaf
      font-style: italic
      font-size: 0.85rem
      background-color: #f8f9fa

.filter-header
  display: flex
  justify-content: space-between
  align-items: center
  margin-bottom: 12px

  label
    margin-bottom: 0  // Remove bottom margin since it's inline now
    flex-shrink: 0

  .range-values
    display: flex
    align-items: center
    gap: 8px
    flex-shrink: 0

    .range-input-min,
    .range-input-max
      width: 60px  // Slightly smaller for inline display
      padding: 4px 6px
      border: 1px solid #ced4da
      border-radius: 4px
      font-size: 0.85rem
      text-align: center

      &:focus
        outline: none
        border-color: #4285f4
        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.1)

      // Hide spinner arrows
      &::-webkit-inner-spin-button,
      &::-webkit-outer-spin-button
        -webkit-appearance: none
        margin: 0

    .range-separator
      color: #6c757d
      font-weight: 500
      font-size: 0.85rem

    .range-unit
      color: #6c757d
      font-size: 0.8rem

.filter-dropdown.active
  z-index: 100

.filter-actions
  margin-top: 24px
  padding-top: 20px
  border-top: 1px solid #e9ecef
  display: flex
  gap: 12px
  justify-content: space-between
  align-items: center
  background: transparent
  position: relative
  z-index: 1

  // Make reset button use gradient style
  #resetAllFiltersBtn
    @include gradient-button
    padding: 12px 24px
    font-weight: 500
    font-size: 0.9rem
    flex: 0 0 auto

    &:hover
      background: $gradient-light !important

  #toggleLayoutBtn
    @include solid-button($primary-color)
    display: flex
    align-items: center
    gap: 6px
    padding: 12px 24px
    font-size: 0.9rem
    flex: 0 0 auto

    .toggle-icon
      font-size: 1.1em
      line-height: 1

.range-filter
  input[type="range"]
    width: 100%
    margin: 10px 0 8px 0
    height: 6px
    border-radius: 3px
    background: #e9ecef
    outline: none
    -webkit-appearance: none

    &::-webkit-slider-thumb
      -webkit-appearance: none
      appearance: none
      width: 18px
      height: 18px
      border-radius: 50%
      background: $gradient-primary
      cursor: pointer
      box-shadow: 0 2px 4px rgba(0,0,0,0.2)

    &::-moz-range-thumb
      width: 18px
      height: 18px
      border-radius: 50%
      background: $gradient-primary
      cursor: pointer
      border: none
      box-shadow: 0 2px 4px rgba(0,0,0,0.2)

  .range-labels
    display: flex
    justify-content: space-between
    font-size: 0.8rem
    color: #6c757d
    margin-top: 4px

.range-filter.dual-handle
  .range-values
    display: flex
    align-items: center
    gap: 8px
    margin-bottom: 20px

    .range-input-min,
    .range-input-max
      width: 70px
      padding: 6px 8px
      border: 1px solid #ced4da
      border-radius: 4px
      font-size: 0.9rem
      text-align: center

      &:focus
        outline: none
        border-color: #4285f4
        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.1)

      // Hide spinner arrows
      &::-webkit-inner-spin-button,
      &::-webkit-outer-spin-button
        -webkit-appearance: none
        margin: 0

    .range-separator
      color: #6c757d
      font-weight: 500

    .range-unit
      color: #6c757d
      font-size: 0.85rem

  .slider-container
    position: relative
    height: 40px
    width: 100%
    cursor: pointer
    margin-top: 8px

    .slider-track
      position: absolute
      width: 100%
      height: 6px
      background: #e9ecef
      border-radius: 3px
      top: 50%
      transform: translateY(-50%)

    .slider-range
      position: absolute
      height: 6px
      background: $gradient-primary
      border-radius: 3px
      top: 50%
      transform: translateY(-50%)
      pointer-events: none

    .slider-handle
      position: absolute
      width: 22px
      height: 22px
      border-radius: 50%
      background: white
      border: 2px solid $primary-color
      top: 50%
      transform: translate(-50%, -50%)
      cursor: grab
      box-shadow: 0 2px 4px rgba(0,0,0,0.2)
      transition: box-shadow 0.15s ease, transform 0.15s ease
      z-index: 2

      &:hover
        box-shadow: 0 3px 8px rgba(0,0,0,0.3)
        transform: translate(-50%, -50%) scale(1.1)

      &:active,
      &.active
        cursor: grabbing
        box-shadow: 0 1px 3px rgba(0,0,0,0.3)
        transform: translate(-50%, -50%) scale(0.95)
        z-index: 3  // Ensure active handle is on top

      // Visual distinction between min and max handles
      &.handle-min
        background: white

      &.handle-max
        background: white

      // Optional: Add subtle visual difference
      &.handle-min::after
        content: ''
        position: absolute
        width: 4px
        height: 4px
        background: $primary-color
        border-radius: 50%
        top: 50%
        left: 50%
        transform: translate(-50%, -50%)

      &.handle-max::after
        content: ''
        position: absolute
        width: 6px
        height: 6px
        background: $primary-color
        border-radius: 50%
        top: 50%
        left: 50%
        transform: translate(-50%, -50%)

// ADDED: Ensure ag-grid takes full width
#leaderboardGrid
  width: 100% !important
  max-width: none

  .ag-root-wrapper
    width: 100% !important

  .ag-root
    width: 100% !important

// ADDED: Ensure search wrapper takes full width
#leaderboardSearchWrapper
  width: 100%
  max-width: none

.checkbox-container
  display: flex
  flex-wrap: wrap
  gap: 0.5rem
  align-items: center


.checkbox-label
  display: flex
  align-items: center
  gap: 0.3rem
  font-size: 0.9rem
  cursor: pointer
  padding: 0.2rem 0.5rem
  white-space: nowrap
  margin: 0


.checkbox-label input[type="checkbox"]
  margin: 0
  margin-right: 0.3rem


.checkbox-label:hover
  background-color: #f5f5f5
  border-radius: 3px


/* For very small containers, allow stacking on narrow screens */
@media (max-width: 768px)
  .checkbox-container
    flex-direction: column
    align-items: flex-start

// Normal mode (default) - filters above leaderboard
.leaderboard-container
  &:not(.sidebar-mode)
    #advancedFiltersPanel
      width: 100%
      margin-bottom: 1rem

// Sidebar mode - grid layout with filters on right
.leaderboard-container.sidebar-mode
  display: grid
  grid-template-areas: "header header" "search search" "breadcrumb breadcrumb" "grid filters"
  grid-template-columns: 1fr 500px  // Adjust width as needed
  gap: 1rem
  align-items: start  // Align items to top

  &.filters-hidden
    grid-template-areas: "header" "search" "breadcrumb" "grid"
    grid-template-columns: 1fr

  .leaderboard-header
    grid-area: header

  #leaderboardSearchWrapper
    grid-area: search

  .leaderboard-breadcrumb
    grid-area: breadcrumb

  #leaderboardGrid
    grid-area: grid
    height: 1500px  // Keep your existing height

  #advancedFiltersPanel
    grid-area: filters

    position: sticky
    top: 20px  // Stick to top when scrolling
    align-self: stretch  // Stretch to fill available height
    height: auto
    max-height: calc(100vh - 40px)  // Prevent overflow
    overflow-y: auto
    padding: 1rem
    background: #f8f9fa
    border-left: 1px solid #ddd
    margin: 0  // Remove any margins
    border-radius: 8px 0 0 8px  // Round left corners only

    // Hide the panel when filters are hidden
    .leaderboard-container.sidebar-mode.filters-hidden &
      display: none !important

    // Stack filter columns vertically in sidebar
    .filters-container
      display: flex
      flex-direction: column
      gap: 1rem

      .filter-column
        width: 100%
        min-height: auto  // Remove fixed height in sidebar
        padding: 15px  // Reduce padding in sidebar

        // Special handling for benchmark column in sidebar
        &.benchmark-column
          #benchmarkFilterPanel
            max-height: 300px  // Fixed height for sidebar mode
            width: 100%  // Override the 500px width
            border: 1px solid #e1e5e9  // Lighter border

            // Make the tree more compact in sidebar
            .benchmark-tree
              padding-left: 0.5rem  // Reduce padding

            .benchmark-node
              padding-left: 0.5rem  // Reduce indent

            // Make checkboxes and labels more compact
            .tree-node-header label
              font-size: 0.85rem  // Slightly smaller text

    // Adjust action buttons for sidebar
    .filter-actions
      padding: 16px
      margin: 0
      background: white
      border-radius: 0 0 8px 8px

      button
        padding: 10px 20px  // Slightly smaller buttons
        font-size: 0.85rem

// Responsive adjustments
@media (max-width: 1400px)
  .leaderboard-container.sidebar-mode
    grid-template-columns: 1fr 350px  // Narrower sidebar on smaller screens

@media (max-width: 1200px)
  .leaderboard-container.sidebar-mode
    // Stack vertically on tablets
    grid-template-areas: "header" "search" "filters" "breadcrumb" "grid"
    grid-template-columns: 1fr

    #advancedFiltersPanel
      position: static
      max-height: none
      margin-bottom: 1rem
      border-left: none
      border-top: 1px solid #ddd

.leaderboard-container:not(.sidebar-mode)
  #benchmarkFilterPanel
    width: 100%  // Take full width in normal mode too
    overflow-y: auto
    padding: 0.4rem
    border: 1px solid $primary-light
    border-radius: 6px
    background-color: #f9f9f9

// Make sure sidebar mode completely overrides these styles
.leaderboard-container.sidebar-mode:not(.filters-hidden)
  #advancedFiltersPanel
    // Force full height of grid area
    min-height: 100%

    #benchmarkFilterPanel
      width: 100% !important  // Force full width in sidebar
      max-width: none !important  // Remove any max-width constraints

.filter-column-header
  display: flex
  justify-content: space-between
  align-items: center
  margin-bottom: 16px
  padding-bottom: 8px
  border-bottom: 1px solid #e9ecef

  h4
    margin: 0
    font-size: 1rem
    font-weight: 600
    color: #495057

  .reset-link
    font-size: 0.85rem
    color: $primary-color
    text-decoration: none
    font-weight: 500
    transition: all 0.2s ease

    &:hover
      color: darken($primary-color, 10%)
      text-decoration: underline

// Benchmark separator styling
.benchmark-separator
  margin: 0.5rem 0 0.3rem 0
  padding: 0.3rem 0
  
  hr
    border: none
    border-top: 1px solid #ddd
    margin: 0.3rem 0
    
  .separator-label
    display: block
    font-size: 0.8rem
    color: #666
    font-weight: 500
    text-align: center
    margin-top: 0.3rem
    font-style: italic

.header-actions
    display: flex
    align-items: center
    gap: 8px

.btn-icon
    background: $primary-color
    color: white
    border: none
    border-radius: 4px
    padding: 6px 8px
    font-size: 16px
    cursor: pointer
    transition: all 0.2s ease
    min-width: 32px
    height: 32px
    display: flex
    align-items: center
    justify-content: center

    &:hover
      background: darken($primary-color, 10%)
      transform: translateY(-1px)

    &:active
      transform: translateY(0)



// Vision parent container styling
.benchmark-node.vision-parent
  margin-bottom: 0.3rem
  
  .tree-node-header
    padding: 0.3rem 0
    background-color: #f8f9fa
    border-radius: 4px
    margin-bottom: 0.15rem
    
  .vision-parent-label
    font-weight: 600
    color: #495057
    font-size: 0.9rem
    
  // Remove the left border and padding for the vision parent
  border-left: none
  padding-left: 0
  
  // Style the nested children differently
  > ul
    margin-left: 0.8rem
    
    .benchmark-node
      border-left: 1px solid #ddd
      padding-left: 0.8rem

// Engineering parent container styling
.benchmark-node.engineering-parent
  margin-bottom: 0.3rem
  margin-top: 0.5rem
  
  .tree-node-header
    padding: 0.3rem 0
    background-color: #f0f4f8
    border-radius: 4px
    margin-bottom: 0.15rem
    
  .engineering-parent-label
    font-weight: 600
    color: #5C8DB8
    font-size: 0.9rem
    
  // Remove the left border and padding for the engineering parent
  border-left: none
  padding-left: 0
  
  // Style the nested children differently
  > ul
    margin-left: 0.8rem
    
    .benchmark-node
      border-left: 1px solid #ddd
      padding-left: 0.8rem